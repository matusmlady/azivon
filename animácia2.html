<!DOCTYPE html>
<html>
<html lang='en'>
 <head>
  <title>Animácia 2</title>
   <style>
    .platno {
             margin: auto;
             width: 620px;
             height: 400px;
            }
   </style>
 </head>
 <body>
  <div class="platno"><canvas id="animacia2"></canvas></div>
   <script>   
    function animácia2() {
        let c = document.getElementById("animacia2"); // First of all, you must find the <canvas> element. This is done by using the HTML DOM method getElementById().
        let ctx = c.getContext("2d"); //Secondly, you need a drawing object for the canvas. The getContext() is a built-in HTML object, with properties and methods for drawing.
        c.height = 400;
        c.width = 620;
        c.style.height = "400px";
        c.style.width = "620px";
    
        savedData = new Image();
        const dimension = 80;

        // zadefinovanie funkcií
        function kruh(xArg = 0, yArg = 0, r = 0) {
        //Draw a circle
        ctx.beginPath();
        ctx.arc(xArg, yArg, r, 0, 2 * Math.PI);
        ctx.fill();
        }
        function stvorec(xArg = 0, yArg = 0, x = 0, y = 0) {
        //Draw a rectangle
        ctx.beginPath();
        ctx.strokeRect(xArg, yArg, x, y);
        }
    

     // Legenda
     let xl = 480;
     let yl = 20;
     ctx.fillRect(400, 0, 220, 400);
     ctx.font = " bold 18px Calibri";
     ctx.fillStyle = "white";
     ctx.fillText("Legend", xl,yl);
     ctx.fillStyle = "#8BC766";
     ctx.strokeStyle = "black";
     xl = 413;
     yl = 45;
     let b = 14;
     ctx.fillRect(xl, yl, b, b);
     stvorec(xl, yl, b, b)
     ctx.fillStyle = "white";
     ctx.font = "14px Calibri";
     ctx.fillText(" - tile", xl += 16, yl += 11);
     ctx.fillStyle = "red";
     ctx.fillText("1", xl -= 14, yl += 26);
     ctx.fillStyle = "white";
     ctx.fillText(" - conquered tiles by player 1", xl += 5, yl);
     ctx.fillStyle = "red";
     ctx.fillText("2 - conquerable tiles", xl -= 5, yl += 25);
     ctx.fillStyle = "white";
     ctx.fillText(" - conquered tiles by player 2", xl+= 8, yl);
     ctx.strokeStyle = "red";
     stvorec(xl -= 10, yl += 15, b, b);
     ctx.fillText(" - supporting  tiles", xl += 18, yl += 11);
     ctx.strokeStyle = "black";
    ctx.fillStyle = "#5b5e3f";
    ctx.fillRect(xl -= 18, yl += 11, b, b);
    stvorec(xl, yl, b, b);
    ctx.fillStyle = "white";
    ctx.fillText(" - occupied tile", xl+= 16, yl += 11);
     

    // Nakreslenie pozadia
    ctx.fillStyle = "#8BC766";
    ctx.strokeStyle = "black";
    for (let x = 0; x < 400; x = x + dimension) {
        for (let y = 0; y < 400; y = y + dimension) {
            ctx.fillRect(x, y, dimension, dimension);
            ctx.strokeRect(x,y,dimension,dimension);
        }
    }

    // setup
    ctx.strokeStyle = "red";
    ctx.fillStyle = "red";
    let cas = 0;
    ctx.font = "50px Calibri";
    let x = 28;
    let y = 55;
    ctx.fillText("1", x, y);
    ctx.fillStyle = "yellow";
    ctx.fillText("2", x += 4 * dimension, y += 4 * dimension);

    // 1. tah hraca 1
    setTimeout(function() {
        ctx.fillStyle = "red";
        ctx.fillText("1", x -= 2 * dimension, y -= 2 * dimension);
    }, cas += 1000);

    // 1. tah hraca 2
    setTimeout(function() {
        ctx.fillStyle = "yellow";
        ctx.fillText("2", x += dimension, y);
    }, cas += 1000);

    // 2. tah hraca 1
    setTimeout(function() {
        ctx.fillStyle = "red";
        ctx.fillText("1", x, y += dimension);
    }, cas += 1000);

    // 2. tah hraca 2
    setTimeout(function() {
        ctx.fillStyle = "yellow";
        ctx.fillText("2", x -= 2 * dimension, y -= 2 * dimension);
    }, cas += 1000);

    // 3. tah hraca 1
    setTimeout(function() {
        ctx.fillStyle = "red";
        ctx.fillText("1", x, y += dimension);
    }, cas += 1000);

    // 3. tah hraca 2
    setTimeout(function() {
        ctx.fillStyle = "yellow";
        ctx.fillText("2", x += dimension, y -= dimension);
    }, cas += 1000);

    // zvýraznenie okupovaného políčka
    setTimeout(function() {
        ctx.strokeStyle = "black";
        ctx.fillStyle = "#5b5e3f";
        ctx.fillRect(dimension, dimension, dimension, dimension);
        stvorec(dimension, dimension, dimension, dimension);
        ctx.fillStyle = "yellow";
        ctx.fillText("2", x -= dimension, y);
    }, cas += 1000);

    // zvýraznenie sily hraca 1
    setTimeout(function() {
        ctx.strokeStyle = "black";
        ctx.fillStyle = "#949437";
        ctx.fillRect(0, 0, dimension, dimension);
        stvorec(0, 0, dimension, dimension);
        ctx.fillStyle = "red";
        ctx.fillText("1", x -= dimension, y -= dimension);
    }, cas += 1000);
        for (let x = dimension; x <= 2 * dimension; x += dimension) {
        let y = 2 * dimension;
        let x1 = 28;
        let y1 = 2 * dimension + 55;
        setTimeout(function(){
            ctx.fillStyle = "#949437";
            ctx.fillRect(x, y, dimension, dimension);
            stvorec(x, y, dimension, dimension);
            ctx.fillStyle = "red";
            ctx.fillText("1", x1 += dimension, y1);
            }, cas += 1000);    
        }
    
    

    /*savedData.src = c.toDataURL("image/png");
    ctx.drawImage(savedData,0,0);*/
    
    //animácia stvorca ohraničujuceho podporurujúce políčka
    setTimeout(function() {
        ctx.lineWidth = 5;
        ctx.strokeStyle = "red";
        stvorec(0, 0, 240, 240)}, cas += 1000);

    setTimeout(animácia2, cas += 1000);
    }
            animácia2();
            </script>
        </div>
    </body>
</html>